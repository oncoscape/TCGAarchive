# Roadmap to Oncoscape API testing folder. The testing occurs at three different levels: 

- datasource level
- data quatlification for tool applications
- data quantity for tool applications

```sh
cd oncoscape-api-explorer/test
```

### Daily Database Sanitory Checking

Direct to the current database subfolder and run **generateDailyReport.js** 
The output is a markdown file stored in report subfolder under the current directory

```sh
cd tcga
report/log_10112016.md
date > report/log_10112016.md
node generateDailyReport.js >> report/log_10112016.md 
```

### Using cursor to loop through the entire database collections

#### **mongooseTest.js**
This is the code to generate ajv.json, the stage I datasource schema validation

- requires: mongoose
  - collection_counts.json generated by *generate_collections_counts.js*
  - schema_pancan12.json
- Purposes
        - substratify the entire collections to dataType collections

#### **mongooseTest2.js**

This is the code to generate ajv_v2.json, the stage II datasource schema validation
- requires: ajv.json generated by mongooseTest.js
- Purposes
      - re-organize the error messages 
      - calculate the passed percentage at collection level


### Data qualify for tool applications

#### firstly check if the required collection(s) exists for tool usage

#### **disease_collection_structure_validation.js**

This is the code to generate report_arr.json, using brain as standard
- requires: mongoose
      - ajv_v2.json generated by mongooseTest2.js
      - moduleTesting/test_toolname.js
- Purposes
      - validate the tool accessible according to the collection existence
      - incorperate the datasource quality data into tool validation

### Todos

 - test the patient IDs according to patient collection for tool testing, especially for Markers&Patients


# Running Procedure
### Step I:
- cd test/tcga
- node generate_collections_counts.js //output will be in the test folder as "collection_counts.json"

### Step II:
- in interactive node mode, run mongooseTest.js
- save ajvMsg as a json object

### Step III:
- in interactive node mode, run mongooseTest2.js
- save ajvMsg_v2 as a json object

### Step IV:
-  

